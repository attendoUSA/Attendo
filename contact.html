<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact | Attendo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <nav>
            <div class="header-brand">
                <img src="logo.png" class="header-logo" alt="Attendo logo"/>
                <div class="logo">Attendo</div>
            </div>
            <button class="menu-toggle" id="menuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul id="navMenu">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="pricing.html">Pricing</a></li>
                <li><a href="app.html">Login</a></li>
                <li><a href="contact.html" class="active">Contact</a></li>
                <li><a href="social.html">Social</a></li>
            </ul>
            <button class="theme-toggle" id="themeToggle" title="Toggle theme">
                <span class="theme-icon">ðŸŒ™</span>
            </button>
        </nav>
    </header>

    <main>
        <section class="content fade-up">
            <h1>Contact Us</h1>
            <p>We'd love to hear from you! Whether you're a professor, student, or organization, reach out for questions or support.</p>

            <form id="contactForm" class="contact-form">
                <label for="contactName">Name:</label>
                <input id="contactName" type="text" placeholder="Your name" required>

                <label for="contactEmail">Email:</label>
                <input id="contactEmail" type="email" placeholder="Your email" required>

                <label for="contactMessage">Message:</label>
                <textarea id="contactMessage" placeholder="Write your message here..." rows="5" required></textarea>

                <button type="submit" class="btn-primary">Send Message</button>
                <p id="contactStatus" style="margin-top: 0.75rem; font-size: 0.95rem;"></p>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Attendo. All rights reserved.</p>
    </footer>

    <script>
        // =========================
        // Nav + theme handling
        // =========================
        const menuToggle = document.getElementById('menuToggle');
        const navMenu = document.getElementById('navMenu');
        
        menuToggle.addEventListener('click', () => {
            menuToggle.classList.toggle('active');
            navMenu.classList.toggle('active');
        });
        
        document.addEventListener('click', (e) => {
            if (!menuToggle.contains(e.target) && !navMenu.contains(e.target)) {
                menuToggle.classList.remove('active');
                navMenu.classList.remove('active');
            }
        });
        
        navMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                menuToggle.classList.remove('active');
                navMenu.classList.remove('active');
            });
        });
        
        window.addEventListener("load", () => {
            document.body.classList.add("loaded");
            document.querySelectorAll(".fade-up").forEach(el => el.classList.add("visible"));
        });

        window.addEventListener("scroll", () => {
            const header = document.querySelector("header");
            if (window.scrollY > 20) header.classList.add("scrolled");
            else header.classList.remove("scrolled");
        });

        function initTheme() {
            const saved = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', saved);
            updateThemeIcon(saved);
        }

        function updateThemeIcon(theme) {
            const icon = document.querySelector('#themeToggle .theme-icon');
            if (icon) icon.textContent = theme === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸';
        }

        document.getElementById('themeToggle').addEventListener('click', () => {
            const current = document.documentElement.getAttribute('data-theme');
            const next = current === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', next);
            localStorage.setItem('theme', next);
            updateThemeIcon(next);
        });

        initTheme();

        // =========================
        // Contact form â†’ backend
        // =========================
        const contactForm = document.getElementById('contactForm');
        const contactStatus = document.getElementById('contactStatus');

        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            contactStatus.textContent = "Sending your message...";
            contactStatus.style.color = "#ccc";

            const payload = {
                name: document.getElementById('contactName').value.trim(),
                email: document.getElementById('contactEmail').value.trim(),
                message: document.getElementById('contactMessage').value.trim(),
            };

            try {
                const res = await fetch('http://127.0.0.1:8000/contact/send', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload),
                });

                if (!res.ok) {
                    const data = await res.json().catch(() => ({}));
                    throw new Error(data.detail || "Failed to send message");
                }

                contactStatus.textContent = "Message sent! We'll get back to you soon.";
                contactStatus.style.color = "#4ade80"; // green-ish
                contactForm.reset();
            } catch (err) {
                console.error(err);
                contactStatus.textContent = "Error sending message. Please try again.";
                contactStatus.style.color = "#f97373"; // red-ish
            }
        });
    </script>
</body>
</html>

